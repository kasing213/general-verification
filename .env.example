# OCR Verification Service Configuration

# ===== CORE CONFIGURATION =====
API_KEY=your-api-key-here
OPENAI_API_KEY=your-openai-api-key-here
PORT=3000

# ===== SECURITY KEYS =====
# Master secret key for JWT signing and microservice authentication
# Generate with: openssl rand -hex 32
MASTER_SECRET_KEY=your-master-secret-key-here
JWT_SECRET=your-jwt-secret-key-here  # Can be same as MASTER_SECRET_KEY

# ===== DATABASE =====
MONGO_URL=mongodb://0.0.0.0:27017
DB_NAME=ocrServiceDB

# ===== PADDLEOCR CONFIGURATION =====
# Enable/disable PaddleOCR (set to false to use GPT-4o only)
USE_PADDLE_OCR=true

# PaddleOCR service URL (Docker container)
PADDLE_OCR_SERVICE_URL=http://localhost:8866/predict/ocr_system

# Confidence threshold for accepting PaddleOCR results (0.0-1.0)
PADDLE_CONFIDENCE_THRESHOLD=0.50

# PaddleOCR request timeout in milliseconds
PADDLE_OCR_TIMEOUT_MS=30000

# ===== GPT-4O CONFIGURATION =====
# Enable fallback to GPT-4o when PaddleOCR fails or low confidence
GPT_FALLBACK_ENABLED=true

# Timeout for OpenAI API calls in milliseconds
OCR_TIMEOUT_MS=60000

# Maximum retries for OpenAI API calls
OCR_MAX_RETRIES=3

# OpenAI rate limit per minute
OCR_RATE_LIMIT_PER_MINUTE=10

# ===== NAME INTELLIGENCE CONFIGURATION =====
# Confidence threshold for auto-approving name matches (percentage)
NAME_MATCH_STRICT_THRESHOLD=85

# Confidence threshold for sending to GPT judge (percentage)
NAME_MATCH_GPT_THRESHOLD=70

# Maximum Levenshtein distance for fuzzy name matching
MAX_LEVENSHTEIN_DISTANCE=2

# Enable OCR error correction (0/O, 1/I, etc.)
ENABLE_OCR_CORRECTION=true

# Enable initial/prefix matching (K. â†” KANHA)
ENABLE_INITIAL_MATCHING=true

# ===== PAYMENT VERIFICATION =====
# Amount tolerance percentage for payment verification
PAYMENT_TOLERANCE_PERCENT=5

# Maximum age of screenshots in days before fraud alert
MAX_SCREENSHOT_AGE_DAYS=7

# USD to KHR exchange rate for currency conversion
USD_TO_KHR_RATE=4000

# ===== LEARNING SYSTEM =====
# Enable OCR error learning (stores character-level mistakes)
ENABLE_OCR_ERROR_LEARNING=true

# Enable pattern learning from verification outcomes
ENABLE_PATTERN_LEARNING=true

# ===== SECURITY & FRAUD =====
# Enable duplicate transaction detection
ENABLE_DUPLICATE_DETECTION=true

# Enable screenshot age validation
ENABLE_SCREENSHOT_AGE_VALIDATION=true

# Enable bank name verification
ENABLE_BANK_VERIFICATION=false

# ===== IMAGE ENHANCEMENT =====
# Enable automatic image enhancement before OCR
AUTO_ENHANCE_IMAGES=true

# Enable automatic deskewing/rotation correction
ENABLE_DESKEW=true

# Denoising method: bilateral, nlm, fastNlMeans
DENOISE_METHOD=bilateral

# Sharpening method: unsharp, laplacian, kernel
SHARPEN_METHOD=unsharp

# Contrast enhancement method: clahe, histogram, adaptive
CONTRAST_METHOD=clahe

# Enable super-resolution upscaling (resource-intensive)
ENABLE_SUPER_RESOLUTION=false

# Text detection method for enhancement: morphological, mser, east
TEXT_DETECTION_METHOD=morphological

# Quality threshold below which enhancement is applied (0-100)
ENHANCEMENT_QUALITY_THRESHOLD=70

# Maximum enhancement processing time in milliseconds
MAX_ENHANCEMENT_TIME_MS=10000

# ===== DEVELOPMENT =====
# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Enable detailed OCR logging
ENABLE_OCR_LOGGING=true

# Enable performance monitoring
ENABLE_PERFORMANCE_MONITORING=true

# ===== MULTI-TENANT SUPPORT =====
# Default tenant ID for single-tenant deployments
DEFAULT_TENANT_ID=default

# Enable tenant isolation for name aliases and learning
ENABLE_TENANT_ISOLATION=true

# ===== AUDIT INTERFACE =====
# Frontend URL for CORS configuration
FRONTEND_URL=http://localhost:3000

# Email notifications (optional)
EMAIL_ENABLED=false

# SMS notifications (optional)
SMS_ENABLED=false